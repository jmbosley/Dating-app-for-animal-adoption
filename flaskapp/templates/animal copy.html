{% extends "base.html" %}
{% block content %}
<body>
	<h1>{{title}}</h1>

	<div class="split">

		<div class="header">
			<h2>{{ result.name }}</h2>
		</div>

<!-- Slideshow made with help from https://www.w3schools.com/howto/howto_js_slideshow.asp -->
		<div class = "image">

			<div class="slideshow-container">
				{% if result.numImages == 0 %}
				<div class="mySlides fade">
    				<div class="numbertext">1 / 1</div>
					{% set image_url = 'images/animalImages/placeholderAnimal.jpg' %}
    				<img src="{{ url_for('static', filename=image_url) }}" alt="Animal Image" style="max-width:50%" class="image">
    				<div class="text"> {{ result.name }} </div>
  				</div>
	
				{% else %}
				{% for img_num in range(result.numImages) %}
  				<div class="mySlides fade">
    				<div class="numbertext">{{img_num + 1}} / {{result.numImages}}</div>
					{% set image_url = 'images/animalImages/animalImg_' + (result.id|string) + '_' + (img_num|string) + '.jpg' %}
    				<img src="{{ url_for('static', filename=image_url) }}" alt="Animal Image" style="max-width:50%" class="image">
    				<div class="text"> {{ result.name }} </div>
  				</div>
				{% endfor %}
				{% endif %}
			</div>

			<br>

  			<!-- Next and previous buttons -->
			<a class="prev" onclick="plusSlides(-1)">&#10094;</a>
  			<a class="next" onclick="plusSlides(1)">&#10095;</a>

  			<!-- The dots/circles -->

				<div style="text-align:center">
				{% for img_num in range(result.numImages) %}
  					<span class="dot" onclick="currentSlide({{img_num}} + 1)"></span>
				{% endfor %}
				</div>
		</div>


		<div class="text">
			<p>
			name: {{result.name}}<br>
			</p>
		</div>


		<div class="options">
			<form id="animalOptions" action="/animals/{{result.id}}" method="POST" enctype="multipart/form-data">
				{{ form.hidden_tag() }}
				<input type="hidden" name="_method" value="DELETE">
				{{ form.delete(value="Delete Animal", onclick="return confirmAnimalDeletion()", class="btn btn-secondary") }}
				<a href="/edit/animals/{{result.id}}" class="btn btn-secondary">Edit Animal</a>
			</form>
		</div>

</body>

<script>
	let slideIndex = 1;
	showSlides(slideIndex);

	function plusSlides(n) {
  		showSlides(slideIndex += n);
	}

	function currentSlide(n) {
  	showSlides(slideIndex = n);
	}

	function showSlides(n) {
  		let i;
  		let slides = document.getElementsByClassName("mySlides");
  		let dots = document.getElementsByClassName("dot");
  		if (n > slides.length) {slideIndex = 1}    
  		if (n < 1) {slideIndex = slides.length}
  		for (i = 0; i < slides.length; i++) {
    		slides[i].style.display = "none";  
  		}
  		for (i = 0; i < dots.length; i++) {
  		  dots[i].className = dots[i].className.replace(" active", "");
  		}
  		slides[slideIndex-1].style.display = "block";  
  		dots[slideIndex-1].className += " active";
	}
</script>


{% endblock %}